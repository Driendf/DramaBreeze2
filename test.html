<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Reproductor Multi-Idioma / Multi-Servidor</title>
<style>
:root{--bg:#071426;--panel:#0b1724;--muted:rgba(255,255,255,0.18);--accent:#2b9bff;--accent2:#ff3ca6}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#eaf3ff;background:var(--bg)}
.wrap{max-width:1180px;margin:18px auto;padding:0;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.02)}
.player-wrap{
  position:relative;
  border-radius:12px;
  overflow:hidden;
  background:#060914;
  width:100%;
  height:56vh;
  min-height:400px;
  display:flex;
  flex-direction:column;
}
.player-top{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
.btn{background:var(--panel);border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;color:var(--muted);cursor:pointer}
#listsContainer{
  flex:1;
  overflow-y:auto;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.langs{display:flex;gap:18px;justify-content:center;align-items:center;flex-wrap:wrap}
.lang{width:72px;height:72px;border-radius:999px;display:flex;align-items:center;justify-content:center;flex-direction:column;cursor:pointer;border:3px solid transparent;transition:transform .12s,box-shadow .12s}
.lang .label{font-size:12px;margin-top:6px;opacity:.95}
.lang.selected{box-shadow:0 10px 40px rgba(12,20,36,0.6);border-color:var(--accent)}
.servers{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px}
.server{display:flex;gap:8px;align-items:center;justify-content:center;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02);cursor:pointer;flex-direction:column;text-align:center;transition:transform .12s}
.server:hover{transform:translateY(-3px)}
.server .ico{width:48px;height:48px;border-radius:12px;background:#071426;display:flex;align-items:center;justify-content:center;font-weight:800;color:#fff;flex-shrink:0;margin-bottom:4px}
iframe{width:100%;height:100%;border:0;display:none}
.skeleton{position:absolute;inset:0;background:linear-gradient(90deg,#0b1220 0,#091525 50%,#0b1220 100%);display:flex;align-items:center;justify-content:center;display:none;z-index:2}
.sk-card{width:80%;max-width:520px;height:60%;border-radius:12px;background:linear-gradient(180deg,#0b1229,#071220);display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center}
.sk-bar{height:12px;width:70%;background:rgba(255,255,255,0.03);border-radius:6px}
.sk-circle{width:84px;height:84px;border-radius:999px;background:rgba(255,255,255,0.03)}
@media(max-width:640px){
  .lang{width:60px;height:60px}
  .servers{grid-template-columns:1fr}
  .player-wrap{height:50vh;min-height:300px}
}
</style>
</head>
<body>

<div class="wrap">
  <div class="player-wrap" id="playerWrap">
    <div class="player-top">
      <button class="btn" id="backBtn">← Atrás</button>
      <div id="currentInfo" style="margin-left:6px;font-weight:700">Selecciona un servidor</div>
      <a id="openNew" class="btn" target="_blank" rel="noopener">Abrir en nueva pestaña</a>
    </div>

    <div id="listsContainer">
      <div class="langs" id="langs"></div>
      <div id="serversContainer" class="servers"></div>
    </div>

    <div id="skeleton" class="skeleton">
      <div class="sk-card">
        <div class="sk-circle"></div>
        <div class="sk-bar"></div>
        <div class="sk-bar" style="width:40%"></div>
      </div>
    </div>
    <iframe id="playerFrame" src="" allowfullscreen allow="autoplay"></iframe>
  </div>
</div>

<script>
const DATA = [
  { idioma: 'Latino', code: 'LA', color: '#16a34a', servidores: [
      { nombre: 'Ok.ru', link: '//ok.ru/videoembed/9223279020634?nochat=1' },
      { nombre: 'Luluvdoo', link: 'https://luluvdoo.com/e/8zyhiscikhci' }
    ]
  },
  { idioma: 'Castellano', code: 'ES', color: '#2563eb', servidores: [
      { nombre: 'Embed69', link: 'https://embed69.org/f/1543542' }
    ]
  },
  { idioma: 'Japonés', code: 'JP', color: '#ef4444', servidores: [
      { nombre: 'Mega', link: 'https://mega.nz/embed/qgpTXb5b#T3PQwUTZQ-IWWWfja3dXYd-ebTDTK32pa6SpGKbbtIY' }
    ]
  }
];

const langsWrap = document.getElementById('langs');
const serversContainer = document.getElementById('serversContainer');
const playerWrap = document.getElementById('playerWrap');
const playerFrame = document.getElementById('playerFrame');
const skeleton = document.getElementById('skeleton');
const currentInfo = document.getElementById('currentInfo');
const openNew = document.getElementById('openNew');
const backBtn = document.getElementById('backBtn');
const listsContainer = document.getElementById('listsContainer');

let currentLangIndex = 0;

// Render idiomas
function renderLangs(){
  langsWrap.innerHTML = '';
  DATA.forEach((d, idx)=>{
    const el = document.createElement('div');
    el.className = 'lang'+(idx===currentLangIndex?' selected':'');
    el.title = d.idioma;
    el.innerHTML = `<div style="width:52px;height:52px;border-radius:999px;background:${d.color};display:flex;align-items:center;justify-content:center;font-weight:800;color:#041428">${d.code}</div><div class="label">${d.idioma}</div>`;
    el.addEventListener('click', ()=>{
      currentLangIndex = idx;
      renderLangs();
      renderServers();
    });
    langsWrap.appendChild(el);
  });
}

// Render servidores
function renderServers(){
  serversContainer.innerHTML = '';
  const list = DATA[currentLangIndex].servidores;
  list.forEach(s => {
    const card = document.createElement('div');
    card.className = 'server';
    card.innerHTML = `<div class="ico" style="background:${DATA[currentLangIndex].color}">${s.nombre.charAt(0)}</div><div class="title">${s.nombre}</div>`;
    card.addEventListener('click', ()=>{ openServer(s); });
    serversContainer.appendChild(card);
  });
}

// Abrir servidor
function openServer(s){
  listsContainer.style.display = 'none';
  skeleton.style.display = 'flex';
  playerFrame.style.display = 'none';
  currentInfo.textContent = DATA[currentLangIndex].idioma + ' — ' + s.nombre;
  openNew.href = s.link;
  setTimeout(()=>{
    playerFrame.src = s.link;
    playerFrame.onload = ()=>{
      skeleton.style.display = 'none';
      playerFrame.style.display = 'block';
    };
  },300);
}

// Volver a lista
backBtn.addEventListener('click', ()=>{
  playerFrame.src = '';
  playerFrame.style.display = 'none';
  skeleton.style.display = 'none';
  listsContainer.style.display = 'flex';
  currentInfo.textContent = 'Selecciona un servidor';
});

renderLangs();
renderServers();
</script>

</body>
</html>
